{% extends "base.html" %}

{% block content %}
<div class="currency-widget">
    <h4>üí± –ö—É—Ä—Å—ã –≤–∞–ª—é—Ç</h4>
    <div id="currency-rates">
        <div class="currency-rate">
            <span>USD/RUB</span>
            <span id="usd-rate">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
        </div>
        <div class="currency-rate">
            <span>EUR/RUB</span>
            <span id="eur-rate">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
        </div>
        <div class="currency-rate">
            <span>CNY/RUB</span>
            <span id="cny-rate">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
        </div>
    </div>
    <small class="text-muted">–û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏</small>
</div>

<script>
// –ü—Ä–æ—Å—Ç–æ–π –ø–∞—Ä—Å–∏–Ω–≥ –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç (–º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π API)
async function loadCurrencyRates() {
    try {
        // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π API, –Ω–∞–ø—Ä–∏–º–µ—Ä:
        // const response = await fetch('https://api.exchangerate-api.com/v4/latest/RUB');
        
        // –ò–º–∏—Ç–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥)
        const mockRates = {
            USD: (Math.random() * 10 + 80).toFixed(2),
            EUR: (Math.random() * 10 + 90).toFixed(2),
            CNY: (Math.random() * 5 + 10).toFixed(2)
        };
        
        document.getElementById('usd-rate').textContent = mockRates.USD + ' ‚ÇΩ';
        document.getElementById('eur-rate').textContent = mockRates.EUR + ' ‚ÇΩ';
        document.getElementById('cny-rate').textContent = mockRates.CNY + ' ‚ÇΩ';
        
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫—É—Ä—Å–æ–≤:', error);
    }
}

// –ó–∞–≥—Ä—É–∂–∞–µ–º –∫—É—Ä—Å—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
document.addEventListener('DOMContentLoaded', loadCurrencyRates);
// –û–±–Ω–æ–≤–ª—è–µ–º –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
setInterval(loadCurrencyRates, 300000);
</script>
{% endblock %}